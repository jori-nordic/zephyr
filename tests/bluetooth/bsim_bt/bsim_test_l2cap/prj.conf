CONFIG_BT=y
CONFIG_BT_CENTRAL=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_SMP=y
CONFIG_BT_BONDABLE=y
CONFIG_BT_L2CAP_DYNAMIC_CHANNEL=y
CONFIG_BT_DEVICE_NAME="L2CAP test"
CONFIG_BT_EATT=n
CONFIG_BT_L2CAP_ECRED=n

CONFIG_BT_AUTO_PHY_UPDATE=n
CONFIG_BT_AUTO_DATA_LEN_UPDATE=n
CONFIG_BT_GAP_AUTO_UPDATE_CONN_PARAMS=n

# TODO: remove: this doesn't affect Coc
# CONFIG_BT_L2CAP_TX_MTU=77

# L2CAP MPS
# 23+27+27=77 makes exactly three full packets
# The minimum value for this is
# L2AP MPS + L2CAP header (4)
CONFIG_BT_BUF_ACL_RX_SIZE=81
CONFIG_BT_BUF_ACL_TX_SIZE=77

# TODO: find out why we can't use 16 buffers. It should fit.

# Fallback segment alloc pool
# Shouldn't get used in this testcase.
# CONFIG_BT_L2CAP_TX_BUF_COUNT=10

CONFIG_BT_BUF_ACL_TX_COUNT=4

CONFIG_BT_CTLR_RX_BUFFERS=10
# The ring buffer now has space for three times as much data
# (default 27, 3*27=81), so that it does not run out of data
# while waiting for new SDUs to be queued.
CONFIG_BT_CTLR_DATA_LENGTH_MAX=81

CONFIG_LOG=y

# CONFIG_BT_DEBUG_LOG=y
# CONFIG_BT_DEBUG_L2CAP=y

CONFIG_ASSERT=y

CONFIG_BT_MAX_CONN=10

CONFIG_NET_BUF_POOL_USAGE=y

# The current params should result in the controller getting L2CAP PDUs in their entirety.
CONFIG_BT_L2CAP_TX_FRAG_COUNT=0
